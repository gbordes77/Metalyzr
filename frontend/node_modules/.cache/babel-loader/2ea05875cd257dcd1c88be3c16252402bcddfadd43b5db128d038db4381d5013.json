{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{useTournaments,useArchetypes}from'../../hooks/useApi';import{LoadingSpinner}from'../../components/ui/LoadingSpinner';import{ErrorMessage}from'../../components/ui/ErrorMessage';import{Card}from'../../components/ui/Card';import{ArrowLeft,Database,Download,Play,Settings,TrendingUp,Users,Activity,RefreshCw}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=()=>{const navigate=useNavigate();const[isRefreshing,setIsRefreshing]=useState(false);const{data:tournaments,loading:tournamentsLoading,error:tournamentsError,refetch:refetchTournaments}=useTournaments({limit:10});const{data:archetypes,loading:archetypesLoading,error:archetypesError,refetch:refetchArchetypes}=useArchetypes();const handleRefresh=async()=>{setIsRefreshing(true);try{await Promise.all([refetchTournaments(),refetchArchetypes()]);}finally{setIsRefreshing(false);}};const totalDecks=(archetypes===null||archetypes===void 0?void 0:archetypes.reduce((sum,archetype)=>sum+archetype.deck_count,0))||0;const activeArchetypes=(archetypes===null||archetypes===void 0?void 0:archetypes.filter(a=>a.deck_count>0).length)||0;return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-sm border-b\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/'),className:\"flex items-center text-gray-600 hover:text-gray-900 mr-4\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-5 w-5 mr-1\"}),\"Retour au Dashboard\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Administration\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"Gestion et monitoring de Metalyzr\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleRefresh,disabled:isRefreshing,className:\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:`h-4 w-4 mr-2 ${isRefreshing?'animate-spin':''}`}),\"Actualiser\"]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Database,{className:\"h-8 w-8 text-blue-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Tournois\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:(tournaments===null||tournaments===void 0?void 0:tournaments.length)||0})]})]})}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"h-8 w-8 text-green-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Arch\\xE9types actifs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:activeArchetypes})]})]})}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Users,{className:\"h-8 w-8 text-purple-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Total decks\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:totalDecks})]})]})}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Activity,{className:\"h-8 w-8 text-orange-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Statut\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-green-600\",children:\"En ligne\"})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(Card,{title:\"Scraping de Donn\\xE9es\",subtitle:\"Lancer le scraping des tournois\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Collecter les derni\\xE8res donn\\xE9es de tournois depuis MTGTop8\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"w-full flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700\",children:[/*#__PURE__*/_jsx(Play,{className:\"h-4 w-4 mr-2\"}),\"Lancer le Scraping\"]})]})}),/*#__PURE__*/_jsx(Card,{title:\"Export des Donn\\xE9es\",subtitle:\"T\\xE9l\\xE9charger les donn\\xE9es\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Exporter les donn\\xE9es de tournois et arch\\xE9types\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(Download,{className:\"h-4 w-4 mr-2\"}),\"Exporter CSV\"]})]})}),/*#__PURE__*/_jsx(Card,{title:\"Configuration\",subtitle:\"Param\\xE8tres syst\\xE8me\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Configurer les arch\\xE9types et r\\xE8gles de d\\xE9tection\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"w-full flex items-center justify-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700\",children:[/*#__PURE__*/_jsx(Settings,{className:\"h-4 w-4 mr-2\"}),\"Param\\xE8tres\"]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsx(Card,{title:\"Tournois R\\xE9cents\",subtitle:\"Derniers tournois ajout\\xE9s\",children:tournamentsLoading?/*#__PURE__*/_jsx(LoadingSpinner,{className:\"h-32\"}):tournamentsError?/*#__PURE__*/_jsx(ErrorMessage,{message:tournamentsError,onRetry:refetchTournaments}):tournaments&&tournaments.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-64 overflow-y-auto\",children:tournaments.slice(0,5).map(tournament=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:tournament.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[tournament.format,\" \\u2022 \",tournament.total_players,\" joueurs\"]})]}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium ${tournament.is_complete?'bg-green-100 text-green-800':'bg-orange-100 text-orange-800'}`,children:tournament.is_complete?'TerminÃ©':'En cours'})]},tournament.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Aucun tournoi trouv\\xE9\"})})}),/*#__PURE__*/_jsx(Card,{title:\"Arch\\xE9types Populaires\",subtitle:\"Top arch\\xE9types par nombre de decks\",children:archetypesLoading?/*#__PURE__*/_jsx(LoadingSpinner,{className:\"h-32\"}):archetypesError?/*#__PURE__*/_jsx(ErrorMessage,{message:archetypesError,onRetry:refetchArchetypes}):archetypes&&archetypes.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-64 overflow-y-auto\",children:archetypes.filter(archetype=>archetype.deck_count>0).sort((a,b)=>b.deck_count-a.deck_count).slice(0,5).map(archetype=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:archetype.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[archetype.category,\" \\u2022 \",archetype.format]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-900\",children:[archetype.deck_count,\" decks\"]})]},archetype.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Aucun arch\\xE9type trouv\\xE9\"})})})]})]})]});};export default AdminDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}