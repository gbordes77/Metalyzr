{"ast":null,"code":"import React,{useState}from'react';import{api}from'../api/realAPI';import{useRealData}from'../hooks/useRealData';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminPanel=()=>{const[newTournament,setNewTournament]=useState({name:'',format:'Standard',participants:0,date:new Date().toISOString().split('T')[0]});const[newArchetype,setNewArchetype]=useState({name:'',description:'',winRate:50,popularity:1});const[message,setMessage]=useState('');// Données en temps réel\nconst{data:stats,loading:statsLoading,refetch:refetchStats}=useRealData(()=>api.getStats());const{data:tournaments,loading:tournamentsLoading,refetch:refetchTournaments}=useRealData(()=>api.getTournaments());const{data:archetypes,loading:archetypesLoading,refetch:refetchArchetypes}=useRealData(()=>api.getArchetypes());const handleAddTournament=async e=>{e.preventDefault();try{const response=await fetch('http://localhost:8000/api/tournaments',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(newTournament)});if(response.ok){setMessage('✅ Tournoi ajouté avec succès!');setNewTournament({name:'',format:'Standard',participants:0,date:new Date().toISOString().split('T')[0]});refetchTournaments();refetchStats();}else{setMessage('❌ Erreur lors de l\\'ajout du tournoi');}}catch(error){setMessage('❌ Erreur de connexion');}};const handleAddArchetype=async e=>{e.preventDefault();try{const response=await fetch('http://localhost:8000/api/archetypes',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(newArchetype)});if(response.ok){setMessage('✅ Archétype ajouté avec succès!');setNewArchetype({name:'',description:'',winRate:50,popularity:1});refetchArchetypes();refetchStats();}else{setMessage('❌ Erreur lors de l\\'ajout de l\\'archétype');}}catch(error){setMessage('❌ Erreur de connexion');}};const handleRefreshAll=()=>{refetchStats();refetchTournaments();refetchArchetypes();setMessage('🔄 Données actualisées');};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Administration Metalyzr\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"Gestion des tournois et arch\\xE9types\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleRefreshAll,className:\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg\",children:\"\\uD83D\\uDD04 Actualiser\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg\",children:\"\\uD83D\\uDCCA Dashboard\"})]})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-800\",children:message})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Statistiques\"}),statsLoading?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Chargement...\"}):stats?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\uD83C\\uDFC6 \",stats.tournaments,\" tournois\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\uD83C\\uDFAF \",stats.archetypes,\" arch\\xE9types\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\uD83C\\uDCCF \",stats.decks,\" decks\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"MAJ: \",new Date(stats.lastUpdate).toLocaleString()]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:\"Erreur de chargement\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-4\",children:\"\\u2795 Ajouter un Tournoi\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddTournament,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nom du tournoi\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTournament.name,onChange:e=>setNewTournament({...newTournament,name:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Format\"}),/*#__PURE__*/_jsxs(\"select\",{value:newTournament.format,onChange:e=>setNewTournament({...newTournament,format:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Standard\",children:\"Standard\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Modern\",children:\"Modern\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Legacy\",children:\"Legacy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pioneer\",children:\"Pioneer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Commander\",children:\"Commander\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Participants\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newTournament.participants,onChange:e=>setNewTournament({...newTournament,participants:parseInt(e.target.value)||0}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",min:\"0\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newTournament.date,onChange:e=>setNewTournament({...newTournament,date:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition-colors\",children:\"Ajouter le Tournoi\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-4\",children:\"\\u2795 Ajouter un Arch\\xE9type\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddArchetype,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nom de l'arch\\xE9type\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newArchetype.name,onChange:e=>setNewArchetype({...newArchetype,name:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newArchetype.description,onChange:e=>setNewArchetype({...newArchetype,description:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",rows:3})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Taux de victoire (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newArchetype.winRate,onChange:e=>setNewArchetype({...newArchetype,winRate:parseFloat(e.target.value)||0}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",min:\"0\",max:\"100\",step:\"0.1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Popularit\\xE9 (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newArchetype.popularity,onChange:e=>setNewArchetype({...newArchetype,popularity:parseFloat(e.target.value)||0}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",min:\"0\",max:\"100\",step:\"0.1\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md transition-colors\",children:\"Ajouter l'Arch\\xE9type\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-4\",children:[\"\\uD83D\\uDCCB Tournois (\",(tournaments===null||tournaments===void 0?void 0:tournaments.length)||0,\")\"]}),tournamentsLoading?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Chargement...\"}):tournaments&&tournaments.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-2\",children:\"Nom\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-2\",children:\"Format\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-2\",children:\"Participants\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-2\",children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tournaments.map(tournament=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 font-medium\",children:tournament.name}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2\",children:tournament.format}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2\",children:tournament.participants}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2\",children:tournament.date})]},tournament.id))})]})}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Aucun tournoi\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-4\",children:[\"\\uD83D\\uDCCB Arch\\xE9types (\",(archetypes===null||archetypes===void 0?void 0:archetypes.length)||0,\")\"]}),archetypesLoading?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Chargement...\"}):archetypes&&archetypes.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-2\",children:\"Nom\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-2\",children:\"WR%\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left py-2\",children:\"Pop%\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:archetypes.map(archetype=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 font-medium\",children:archetype.name}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2\",children:[archetype.winRate,\"%\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2\",children:[archetype.popularity,\"%\"]})]},archetype.id))})]})}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Aucun arch\\xE9type\"})]})]})]})});};export default AdminPanel;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}