{"ast":null,"code":"import React from'react';import{api}from'../api/realAPI';import{useRealData}from'../hooks/useRealData';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RealDashboard=()=>{// Données réelles sans fallback\nconst{data:stats,loading:statsLoading,error:statsError,refetch:refetchStats}=useRealData(()=>api.getStats());const{data:tournaments,loading:tournamentsLoading,error:tournamentsError,refetch:refetchTournaments}=useRealData(()=>api.getTournaments());const{data:archetypes,loading:archetypesLoading,error:archetypesError,refetch:refetchArchetypes}=useRealData(()=>api.getArchetypes());const{data:health,loading:healthLoading,error:healthError,refetch:refetchHealth}=useRealData(()=>api.checkHealth());const handleRefreshAll=()=>{refetchStats();refetchTournaments();refetchArchetypes();refetchHealth();};const isSystemOnline=(health===null||health===void 0?void 0:health.status)==='healthy'&&!healthError;return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Metalyzr Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"Donn\\xE9es r\\xE9elles du syst\\xE8me de m\\xE9taanalyse MTG\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:`px-3 py-1 rounded-full text-sm font-medium ${isSystemOnline?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}`,children:healthLoading?'Vérification...':isSystemOnline?'Système En Ligne':'Système Hors Ligne'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRefreshAll,className:\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors\",children:\"Actualiser\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(StatCard,{title:\"Tournois\",value:stats===null||stats===void 0?void 0:stats.tournaments,loading:statsLoading,error:statsError,icon:\"\\uD83C\\uDFC6\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Arch\\xE9types\",value:stats===null||stats===void 0?void 0:stats.archetypes,loading:statsLoading,error:statsError,icon:\"\\uD83C\\uDFAF\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Decks Analys\\xE9s\",value:stats===null||stats===void 0?void 0:stats.decks,loading:statsLoading,error:statsError,icon:\"\\uD83C\\uDCCF\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsx(DataSection,{title:\"Tournois R\\xE9cents\",loading:tournamentsLoading,error:tournamentsError,onRetry:refetchTournaments,children:tournaments&&tournaments.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:tournaments.slice(0,5).map(tournament=>/*#__PURE__*/_jsxs(\"div\",{className:\"border-l-4 border-blue-500 pl-4 py-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:tournament.external_url?/*#__PURE__*/_jsxs(\"a\",{href:tournament.external_url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-600 hover:text-blue-800 hover:underline\",children:[tournament.name,\" \\uD83D\\uDD17\"]}):tournament.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[tournament.format,\" \\u2022 \",tournament.participants,\" participants \\u2022 \",tournament.date,tournament.organizer&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs text-gray-500\",children:[\"\\u2022 \",tournament.organizer]})]})]},tournament.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Aucun tournoi trouv\\xE9\"})}),/*#__PURE__*/_jsx(DataSection,{title:\"Arch\\xE9types Populaires\",loading:archetypesLoading,error:archetypesError,onRetry:refetchArchetypes,children:archetypes&&archetypes.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:archetypes.slice(0,5).map(archetype=>/*#__PURE__*/_jsx(\"div\",{className:\"border-l-4 border-green-500 pl-4 py-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:archetype.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:archetype.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-green-600\",children:[archetype.winRate,\"% WR\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[archetype.popularity,\"% META\"]})]})]})},archetype.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Aucun arch\\xE9type trouv\\xE9\"})})]}),stats&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Informations Syst\\xE8me\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Derni\\xE8re mise \\xE0 jour: \",stats.lastUpdate]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Base de donn\\xE9es: \",stats.tournaments,\" tournois, \",stats.archetypes,\" arch\\xE9types, \",stats.decks,\" decks\"]})]})]})});};// Composant StatCard\nconst StatCard=_ref=>{let{title,value,loading,error,icon}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl mr-3\",children:icon}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500\",children:title}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-gray-400\",children:\"Chargement...\"}):error?/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-red-500\",children:\"Erreur\"}):/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-gray-900\",children:value||0})]})]})});};// Composant DataSection\nconst DataSection=_ref2=>{let{title,loading,error,onRetry,children}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:title}),error&&/*#__PURE__*/_jsx(\"button\",{onClick:onRetry,className:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",children:\"R\\xE9essayer\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-600 mb-2\",children:[\"Erreur: \",error]}),/*#__PURE__*/_jsx(\"button\",{onClick:onRetry,className:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",children:\"R\\xE9essayer\"})]}):children]});};export default RealDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}